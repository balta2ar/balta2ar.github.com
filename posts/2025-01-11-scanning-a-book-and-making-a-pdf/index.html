<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Scanning a book and making a PDF | Mostly Technical</title>
<link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css></head><body><nav><ul class=menu><li><a href=/>Home</a></li><li><a href=/about/>About</a></li><li><a href=/categories/>Categories</a></li><li><a href=/tags/>Tags</a></li><li><a href=/index.xml>Subscribe</a></li></ul><hr></nav><div class=article-meta><h1><span class=title>Scanning a book and making a PDF</span></h1><h2 class=date>2025/01/11</h2><p class=terms>Tags: <a href=/tags/books>books</a> <a href=/tags/scanning>scanning</a> <a href=/tags/pdf>pdf</a> <a href=/tags/scantailor>scantailor</a></p></div><main><p>Here&rsquo;s a short reminder-like guide on how I prepare PDFs from scanned books.</p><h3 id=scan-with-a-consistent-dpi-layout-and-paper-format-a3>Scan with a consistent DPI, layout and paper format (A3)</h3><p>When you scan, try to scan all the pages in the same layout, angle and DPI. I prefer to set 600 DPI in my scanner settings and use A3 so that there&rsquo;s enough room for pages and I can always cut off the margins later.</p><p>I scan in batches of several pages at once just in case the scanner runs out of memory or something, so when I&rsquo;m done scanning, I get several files as output:</p><pre tabindex=0><code>&#39;blue 000-_250110_085345.pdf&#39;
&#39;blue 038-_250110_090004.pdf&#39;
&#39;blue 078-_250110_090653.pdf&#39;
&#39;blue 118-_250110_091326.pdf&#39;
&#39;blue 178-_250110_091945.pdf&#39;
</code></pre><h3 id=folder-per-step>Folder per step</h3><p>I normally create a folder for each step of the process, e.g.</p><pre tabindex=0><code>0input
1rotate
2double
etc
</code></pre><h3 id=rotate-pages-90-degrees-clockwise>Rotate pages 90 degrees clockwise</h3><pre tabindex=0><code>for f in *.pdf; do qpdf --rotate=+90 $f 1rotate/$f; done
</code></pre><h3 id=strip-margins>Strip margins</h3><pre tabindex=0><code>briss double.pdf
</code></pre><h3 id=convert-pdf-to-png-images-one-image-per-page>Convert PDF to PNG images, one image per page</h3><pre tabindex=0><code># page is a prefix here
pdftoppm -png double_cropped.pdf page
</code></pre><h3 id=use-scantailor-to-process-png-files-youll-get-tif-files>Use ScanTailor to process PNG files, you&rsquo;ll get TIF files</h3><p>If my input was scanned with 600 DPI, I find it good enough to use 300 DPI in ScanTailor as output.</p><p>If you have front and back pages, set Color/Mix in one of the last steps in ScanTailor.</p><h3 id=text-pages-convert-tif-to-pdf-easy-version-uses-jpeg>Text pages: convert TIF to PDF (easy version, uses jpeg)</h3><p>If you&rsquo;re happy with using JPEG compression, you can just convert all pages from TIF to PDF and be done with it.</p><pre tabindex=0><code>parallel --bar gm convert &#34;{}&#34; &#34;{.}.pdf&#34; ::: ../*.tif
</code></pre><h3 id=text-pages-convert-tif-to-pdf-jbig2-version>Text pages: convert TIF to PDF (JBIG2 version)</h3><p>But if you have many pages that contain only text, you can save some space and make the output PDF smaller by using JBIG2 compression.</p><pre tabindex=0><code>jbig2 -s -a -p -v *.tif &amp;&amp; time jbig2topdf.py output &gt; out.pdf
</code></pre><p><a href=https://github.com/agl/jbig2enc/blob/master/jbig2topdf.py>jbig2topdf.py</a></p><h3 id=front-and-back-pages-convert-tif-to-pdf>Front and back pages: convert TIF to PDF</h3><p>Front and back pages usually don&rsquo;t have text, but have images and colors, so use JPEG. Make sure to have consistent DPI / density for all your pages (front and text). It&rsquo;s enough to lower JPEG quality to 50..70%, try various settings:</p><pre tabindex=0><code>parallel --bar gm convert -density 300 &#34;{}&#34; -compress jpeg -quality 70 &#34;{.}.pdf&#34; ::: *.tif
</code></pre><p>This command assumes you put front/back pages and text pages in separate folders.</p><h3 id=merge-all-pages>Merge all pages</h3><pre tabindex=0><code>pdftk head1.pdf head2.pdf tail/*.pdf cat output final.pdf
</code></pre><h3 id=crop-margins-again>Crop margins again</h3><p>Depending on your settings in ScanTailor, you might want to crop the margins again.</p><pre tabindex=0><code>briss final.pdf
</code></pre><h3 id=ocr>OCR</h3><pre tabindex=0><code>ocrmypdf -l nor --jobs 12 --output-type pdfa final.pdf final.ocr.pdf
</code></pre><h3 id=table-of-contents>Table of contents</h3><p>Table of contents should be a text file in the following format:</p><pre tabindex=0><code>&#34;Intro&#34; 11
&#34;Chapter 1&#34; 15
  &#34;Chapter 1.1&#34; 17
&#34;Chapter 2&#34; 57
  &#34;Chapter 2.1&#34; 67
</code></pre><p>And then merge it into the PDF:</p><pre tabindex=0><code>pdftocio final.pdf &lt; toc.txt
</code></pre><h3 id=clickable-table-of-contents>Clickable table of contents</h3><p>Would have been great to have a clickable table of contents, but I haven&rsquo;t learned how to do that yet.</p><h3 id=get-info-about-the-pdf>Get info about the PDF</h3><p>A couple of useful commands not really related to the process, but useful to know:</p><pre tabindex=0><code># list pages, DPI, sizes, compression ratio
pdfimages -list file.pdf

# get general info
pdfinfo file.pdf
</code></pre><h3 id=useful-links-and-references>Useful links and references</h3><ul><li><a href=https://fransdejonge.com/2014/10/fixing-up-scanned-pdfs-with-scan-tailor/>Fixing up scanned PDFs with Scan Tailor</a></li><li><a href=http://www.konradvoelkel.com/2013/03/scan-to-pdfa/#comment-2736>Scan to PDF/A</a></li><li><a href=https://www.desiquintans.com/pdfguide>PDF Guide</a></li><li><a href=https://github.com/mbaeuerle/Briss-2.0>Briss 2.0</a></li><li><a href=https://github.com/agl/jbig2enc>jbig2enc</a></li><li><a href=https://github.com/trufanov-nok/scantailor-universal>ScanTailor Universal</a></li><li><a href=https://github.com/4lex4/scantailor-advanced>ScanTailor Advanced</a></li><li><a href=https://github.com/ScanTailor-Advanced/scantailor-advanced>ScanTailor Advanced (Official)</a></li></ul></main><footer><script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script>hljs.configure({languages:[]}),hljs.highlightAll()</script><script async src="https://www.googletagmanager.com/gtag/js?id=G-GKQQJJH05F"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GKQQJJH05F")}</script><hr>Â© <a href=https://balta2ar.github.io>Yuri Bochkarev</a> 2009 &ndash; 2025 | <a href=https://github.com/balta2ar>Github</a>
| <a href=https://github.com/balta2ar/balta2ar.github.com/edit/main/content/posts/2025-01-11-scanning-a-book-and-making-a-pdf.md>Edit this page</a></footer></body></html>